:root {
    --tile-size: 80px;
    --gap: 8px;
    /* wooden theme variables */
    --wood-bg: linear-gradient(180deg, #b0895a, #8b5a2b);
    --tile-wood-light: linear-gradient(180deg, #f3deb1, #e0c28a);
    /* classic (initial) theme variables */
    --classic-bg: radial-gradient(circle at 50% 10%, #9b5b2f, #7a3e1d 40%, #7a3e1d 60%, #c99b75 100%);
    --classic-board: linear-gradient(180deg, #f6dec2, #e6b98b);
    --classic-tile: linear-gradient(180deg, #c46b38, #9e4a26);
    --classic-tile-text: #fff2e8;
    /* additional wooden styling variables */
    --wood-frame-dark: #6b3f22;
    --wood-frame-mid: #cda77a;
    --wood-panel: linear-gradient(180deg, #f6e6cf, #e9cf9c);
    --tile-surface-light: linear-gradient(180deg, #f7e6c8, #e5cfa4);
    --tile-edge-dark: #b98653;
    --logo-accent: #c27b2f;
}

html,
body {
    height: 100%;
}

html {
    overflow-y: scroll;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

body {
    font-family: Arial, Helvetica, sans-serif;
    margin: 20px;
}

header h1 {
    margin: 0 0 12px 0
}

.controls {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    align-items: center;
    margin-bottom: 12px
}

/* board becomes an absolute-positioned tile container so tiles can slide smoothly */
#board {
    position: relative;
    display: block;
    margin: 0 auto;
    /* wooden framed board look */
    background: linear-gradient(180deg, #eeddc8, #e1c89a);
    box-shadow: inset 0 4px 8px rgba(255, 255, 255, 0.35), 0 8px 20px rgba(0, 0, 0, 0.28);
    border-radius: 12px;
    padding: 12px;
    border: 10px solid var(--wood-frame-dark);
    width: auto;
    /* promote board to its own layer and contain painting to avoid repaints/twitching */
    transform: translateZ(0);
    contain: paint;
    overflow: visible;
}

/* decorative frame around the board using a pseudo element for deeper frame */
#board::before {
    content: '';
    position: absolute;
    left: -18px;
    right: -18px;
    top: -18px;
    bottom: -18px;
    border-radius: 18px;
    box-shadow: 0 12px 30px rgba(0, 0, 0, 0.35);
    pointer-events: none;
}

.tile {
    width: var(--tile-size);
    height: var(--tile-size);
    display: flex;
    align-items: center;
    justify-content: center;
    /* wooden tile surface: soft bevel, subtle grain */
    background-color: #efd6b0;
    background-image: linear-gradient(180deg, rgba(255, 255, 255, 0.65) 0%, rgba(0, 0, 0, 0.02) 100%),
        repeating-linear-gradient(90deg, rgba(0, 0, 0, 0.015) 0 2px, transparent 2px 8px);
    color: #6b3f20;
    font-weight: 900;
    border-radius: 12px;
    border: 2px solid rgba(0, 0, 0, 0.08);
    cursor: pointer;
    user-select: none;
    position: absolute;
    box-shadow: 0 10px 22px rgba(0, 0, 0, 0.32), inset 0 -8px 14px rgba(0, 0, 0, 0.06);
    transition: transform 360ms cubic-bezier(.2, .8, .2, 1), box-shadow 300ms cubic-bezier(.2, .8, .2, 1), opacity 200ms;
    will-change: transform;
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
}

.tile:hover {
    /* avoid vertical translate which can cause elements to escape and trigger layout changes */
    transform: scale(1.03);
    box-shadow: 0 14px 28px rgba(0, 0, 0, 0.34);
}

.tile.empty {
    background: transparent;
    box-shadow: none;
    cursor: default;
}

.tile:active {
    transform: scale(0.995);
    box-shadow: 0 8px 18px rgba(0, 0, 0, 0.28);
}

.tile .label {
    font-size: calc(var(--tile-size) * 0.55);
    font-family: 'Georgia', 'Times New Roman', serif;
    letter-spacing: 0.6px;
    color: #5a2f14;
    text-shadow: 0 1px 0 rgba(255, 255, 255, 0.7);
    line-height: 1;
    margin: 0;
}

/* Start screen overlay styles */
.start-screen {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0, 0, 0, 0.45);
    z-index: 60;
}

.start-card {
    background: var(--wood-panel);
    border-radius: 14px;
    padding: 22px;
    min-width: 320px;
    box-shadow: 0 18px 40px rgba(0, 0, 0, 0.45), inset 0 2px 0 rgba(255, 255, 255, 0.6);
    text-align: center;
}

/* Panels */
.panel {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 80;
}

.panel-hidden {
    display: none;
}

.panel-card {
    background: var(--wood-panel);
    padding: 28px;
    border-radius: 14px;
    box-shadow: 0 18px 46px rgba(0, 0, 0, 0.45), inset 0 2px 0 rgba(255, 255, 255, 0.6);
    border: 8px solid var(--wood-frame-dark);
    min-width: 360px;
    text-align: center;
}

/* specific layout tweaks for the game panel (center controls and board) */
.panel-card.game-panel {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 18px;
    padding: 28px 36px;
    max-width: 920px;
}

.panel-card.game-panel .controls {
    display: flex;
    width: 100%;
    gap: 8px;
    align-items: center;
    justify-content: space-between;
    flex-wrap: wrap;
}

.panel-card.game-panel .controls .controls-left,
.panel-card.game-panel .controls .controls-right,
.panel-card.game-panel .controls .controls-center {
    display: flex;
    gap: 8px;
    align-items: center;
}

.panel-card.game-panel .controls .controls-center {
    justify-self: center;
    margin-left: auto;
    margin-right: auto;
}

.panel-card.game-panel #board {
    margin: 0 auto;
}

.panel-actions {
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 18px;
}

.panel-actions button {
    padding: 12px 20px;
    border-radius: 18px;
    border: none;
    background: linear-gradient(180deg, var(--logo-accent), #b76a2a);
    color: #2b1b11;
    font-weight: 800;
    box-shadow: 0 6px 0 rgba(0, 0, 0, 0.12), inset 0 -4px 6px rgba(0, 0, 0, 0.06);
    transition: transform 160ms ease, box-shadow 160ms;
}

.panel-actions button:active {
    transform: translateY(2px);
    box-shadow: 0 4px 0 rgba(0, 0, 0, 0.14);
}

.mode-row {
    display: flex;
    gap: 8px;
    align-items: center;
    justify-content: center;
}

.panel-content {
    max-width: 520px;
    text-align: left;
}

.start-card h1 {
    margin: 0 0 12px 0;
    font-size: 22px
}

.start-buttons {
    display: flex;
    flex-direction: column;
    gap: 10px
}

.start-row {
    display: flex;
    gap: 8px;
    align-items: center;
    justify-content: center
}

.start-card button {
    padding: 10px 14px;
    border-radius: 8px;
    border: none;
    background: #dba24a;
    color: #2b1b11;
    font-weight: 700;
    box-shadow: 0 6px 0 rgba(0, 0, 0, 0.12);
}

.start-card input {
    padding: 8px;
    border-radius: 6px;
    border: 1px solid #ccc
}

@media (max-width:420px) {
    :root {
        --tile-size: 56px
    }

    .start-card {
        min-width: 240px
    }
}

.notes {
    margin-top: 16px
}

.controls button,
.controls select {
    padding: 6px 10px
}

#status {
    margin-left: 12px;
    font-weight: 600
}

@media (max-width:420px) {
    :root {
        --tile-size: 56px
    }
}

/* Theme classes: .theme-classic (default) and .theme-wood */
.theme-classic body,
.theme-classic body * {
    transition: background-color 420ms ease, color 320ms ease;
}

.theme-classic #board {
    background: var(--classic-board);
    box-shadow: 0 12px 28px rgba(0, 0, 0, 0.25);
}

.theme-classic .tile {
    background: var(--classic-tile);
    color: var(--classic-tile-text);
    border-radius: 10px
}

.theme-wood #board {
    background: var(--wood-bg);
    box-shadow: inset 0 6px 14px rgba(255, 255, 255, 0.06), 0 8px 20px rgba(0, 0, 0, 0.35);
    border: 6px solid rgba(0, 0, 0, 0.15);
}

.theme-wood .tile {
    background: var(--tile-wood-light);
    color: #2b1f10;
    box-shadow: 0 6px 14px rgba(0, 0, 0, 0.28), inset 0 -4px 6px rgba(0, 0, 0, 0.06);
}

/* subtle page background gradient for classic theme like example */
.theme-classic body {
    background: radial-gradient(circle at top, rgba(156, 86, 44, 0.95), rgba(119, 64, 32, 0.9) 40%, rgba(197, 143, 104, 0.7) 100%);
}

.theme-wood body {
    background: linear-gradient(180deg, #8a4f26, #cfa77e);
}

/* Use an image from the repository Frames folder if available. */
/* When using the repository background image make it cover the full viewport
   and remove page margins so there is no white strip at the bottom. Also
   hide the page header and the extra How-to notes that appear above the
   centered start panel so the wood background is clean. */
body.use-bg-image {
    margin: 0;
    min-height: 100vh;
}

/* Background wrapper: an <img> fills the viewport using object-fit:cover */
#bg-wrapper {
    display: none;
    position: fixed;
    inset: 0;
    z-index: -100;
    overflow: hidden;
    pointer-events: none;
}

body.use-bg-image #bg-wrapper {
    display: block;
}

#bg-wrapper img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    object-position: center center;
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    filter: contrast(1.02) saturate(1.05);
}

/* hide header and the standalone notes section at top-left when background is active */
body.use-bg-image header,
body.use-bg-image>main>.notes {
    display: none !important;
}

/* ensure panels and main content still position correctly when removing margins */
body.use-bg-image .panel,
body.use-bg-image .panel-card {
    box-shadow: 0 14px 36px rgba(0, 0, 0, 0.45);
}